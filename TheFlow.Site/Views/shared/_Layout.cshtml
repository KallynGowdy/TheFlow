@using System.Web.Optimization
@using NavigationRoutes

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    @*<link rel="stylesheet" href="~/Content/foundation/normalize.css" />
    <link rel="stylesheet" href="~/Content/foundation/foundation.css" />*@
    @*<link href="~/Content/uikit/uikit.css" rel="stylesheet" />*@
    <link href="~/Content/Styles.css" rel="stylesheet" />
    <link href="~/Content/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    @RenderSection("head", required: false)
    @Html.Partial("_html5shiv")

    @* favicons and touch icons go here *@

</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="~/">TheFlow</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                <li><a href="~/">Home</a></li>
                <li><a href="~/About">About</a></li>
                <li><a href="~/Develop">Develop</a></li>
                <li class="dropdown">
                    <a href="~/Questions">Questions</a>
                    <ul class="dropdown-menu">
                        <li><a href="~/Questions/Create">Ask a Question</a></li>
                    </ul>
                </li>
                @{var navbarLeftSection = RenderSection("NavBarLeft", false);
                  string navbarLeft = "";
                  if (navbarLeftSection != null)
                  {
                      navbarLeft = navbarLeftSection.ToHtmlString();
                  }}
                @Html.Raw(navbarLeft)
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="divider"></li>
                @{TheFlow.Api.Entities.User user = TheFlow.Site.Controllers.ControllerHelper.Authenticate(Request);}

                @if (user == null)
                {
                    <li><a href="~/Users/LogIn">Create Account</a></li>
                    <li>@Html.ActionLink("Log In", "LogIn", "Users")</li>
                }
                else
                {
                    <li class="dropdown">
                        @Html.ActionLink(user.DisplayName, "Info", "Users", new { user = user.DisplayName }, new { @class = "dropdown-toggle", data_toggle = "dropdown" })
                        <ul class="dropdown-menu">
                            <li>@Html.ActionLink("Log Out", "LogOut", "Users")</li>
                            <li>@Html.ActionLink("Account", "Info", "Users")</li>
                        </ul>
                    </li>  
                    <li>@Html.ActionLink(user.Reputation.ToString(), "Reputation", "Account", new { title = string.Format("{0} Reputation", user.Reputation.ToString()) })</li>
                }
                @{var navbarRightSection = RenderSection("NavBarRight", false);
                  string navbarRight = "";
                  if (navbarRightSection != null)
                  {
                      navbarRight = navbarRightSection.ToHtmlString();
                  }}
                @Html.Raw(navbarRight)
            </ul>
        </div>
    </nav>
    <div class="row">
        <div class="col-md-8 col-md-offset-2 col-sm-12">
            <div class="row">
                <div class="col-md-12">
                    @Html.Partial("_validationSummary")
                    @RenderBody()
                    <hr>
                </div>
            </div>
            <footer class="uk-margin-top">
                <div class="row">
                    <div class="col-md-6">
                        <p class="hidden-sm text-left Copyright"></p>
                        <p class="visible-sm text-center Copyright"></p>
                    </div>
                    <div class="col-md-6">
                        <p class="hidden-sm text-right Time"></p>
                        <p class="visible-sm text-center Time"></p>
                    </div>
                </div>
            </footer>
        </div>
    </div>


    @* A form that includes an anti-forgery token that is used for ajax requests *@
    <form id="__AjaxAntiForgeryForm" style="height: 0px; width: auto; padding: 0px 0px 0px 0px; margin: 0 0 0 0;" method="post" action="#">
        @Html.AntiForgeryToken()
    </form>

    @*<script src="~/scripts/custom.modernizr.js"></script>*@
    @*<script>
        document.write('<script src=' +
        ('__proto__' in {} ? '@Url.Content("~/scripts/zepto")' : '@Url.Content("scripts/jquery-2.0.3")') +
        '.js><\/script>')
    </script>*@
    <script src="~/scripts/jquery-2.0.3.js"></script>
    <script src="~/scripts/bootstrap.js"></script>
    @*<script src="~/scripts/uikit.js"></script>*@
    @*<script src="~/scripts/foundation.min.js"></script>*@
    <script src="~/scripts/moment.js"></script>
    @RenderSection("Scripts", required: false)
    <script>
        $(function () {
            //$(document).foundation();
            @RenderSection("OnPageLoadFunction", required: false)
        });
        setInterval(function () {
            $(".Time").text(moment().format("dddd, MMMM Do YYYY, h:mm:ss a"));
            $(".Copyright").text("© Your Company " + moment().format("YYYY"));
            @RenderSection("TimeUpdateFunction", required: false)
        }, 1000);
    </script>
</body>
</html>
